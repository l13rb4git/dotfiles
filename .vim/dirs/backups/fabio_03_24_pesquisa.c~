#include <stdio.h>


void info_programa()
{
    printf("Informe os dados da pesquisa para ver a média de salário e de filhos da "
           "população, além  do percentual de pessoas com salário acima de mil reais.\n");
}


int get_salario(int i)
{
    printf("Digite o salário do %iº habitante: ", i);
    float salario;
    scanf("%f", &salario);
    return salario;
}


int get_qtd_filhos(int i)
{
    printf("Digite a quantidade de filhos do %iº habitante: ", i);
    int qtd_filhos;
    scanf("%d", &qtd_filhos);
    return qtd_filhos;
}


int incrementar_se_abaixo(int salario_atual)
{
    if (salario_atual >= 1000) return 1;
    return 0;
}


float media(float soma_elementos, int qtd_elementos)
{
    return soma_elementos / qtd_elementos;
}


void pesquisa(int qtd_habitantes)
{
    static int i = 1;
    static float soma_salarios;
    static int soma_filhos;
    static float qtd_salario_abaixo = 0;
    float salario_atual;

    if (qtd_habitantes >= i)
    {
        salario_atual = get_salario(i);
        soma_salarios += salario_atual;
        soma_filhos += get_qtd_filhos(i);
        qtd_salario_abaixo += incrementar_se_abaixo(salario_atual);
        i++;
        pesquisa(qtd_habitantes);
    }
    else
    {
        float media_salario = media(soma_salarios, qtd_habitantes);
        float media_filhos = media(soma_filhos, qtd_habitantes);
        float porcentagem_abaixo = qtd_salario_abaixo / qtd_habitantes * 100;
        printf("Soma: R$%0.2f \nMed: R$%0.2f\n", soma_salarios, media_salario);
        printf("Soma: %d \nMed: %0.3f\n", soma_filhos, media_filhos);
        printf("Porcentegem que recebe menos que R$1000: %0.0f%%", porcentagem_abaixo);
    }
    
}


int main()
{
    info_programa();

    printf("Digite quantos habitantes foram entrevistados nessa pesquisa: ");
    int qtd_habitantes;
    scanf("%d", &qtd_habitantes);

    pesquisa(qtd_habitantes);

    return 0;
}
